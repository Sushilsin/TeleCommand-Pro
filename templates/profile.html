{% extends "base.html" %}

{% block title %}My Profile - TeleCommand Pro{% endblock %}

{% block content %}
<h1 style="margin-bottom: 2rem;">ğŸ‘¤ My Profile</h1>

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 2rem;">
    <div class="card">
        <h2 class="card-title">Account Information</h2>
        
        <div style="display: flex; flex-direction: column; gap: 1.5rem;">
            <div>
                <label style="font-weight: 600; color: #6b7280; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">Username</label>
                <p style="font-size: 1.25rem; font-weight: 600; color: var(--dark); margin-top: 0.5rem;">{{ user.username }}</p>
            </div>
            
            <div>
                <label style="font-weight: 600; color: #6b7280; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">Email</label>
                <p style="font-size: 1.125rem; color: var(--dark); margin-top: 0.5rem;">{{ user.email or 'Not set' }}</p>
            </div>
            
            <div>
                <label style="font-weight: 600; color: #6b7280; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">Role</label>
                <p style="margin-top: 0.5rem;">
                    {% if user.role == 'admin' %}
                        <span class="badge" style="background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); color: #78350f; font-size: 1rem; padding: 0.5rem 1rem;">
                            ğŸ‘‘ Administrator
                        </span>
                    {% else %}
                        <span class="badge badge-info" style="font-size: 1rem; padding: 0.5rem 1rem;">
                            ğŸ‘ï¸ Viewer
                        </span>
                    {% endif %}
                </p>
            </div>
            
            <div>
                <label style="font-weight: 600; color: #6b7280; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">Member Since</label>
                <p style="font-size: 1.125rem; color: var(--dark); margin-top: 0.5rem;">{{ user.created_at }}</p>
            </div>
        </div>
    </div>
    
    <div class="card">
        <h2 class="card-title">Change Password</h2>
        
        <form method="POST" action="{{ url_for('change_password') }}">
            <div class="form-group">
                <label class="form-label" for="current_password">Current Password</label>
                <input type="password" class="form-control" id="current_password" name="current_password" required autocomplete="current-password">
            </div>
            
            <div class="form-group">
                <label class="form-label" for="new_password">New Password</label>
                <input type="password" class="form-control" id="new_password" name="new_password" required minlength="6" autocomplete="new-password">
                <small style="color: #666; font-size: 0.875rem;">Minimum 6 characters</small>
            </div>
            
            <div class="form-group">
                <label class="form-label" for="confirm_password">Confirm New Password</label>
                <input type="password" class="form-control" id="confirm_password" name="confirm_password" required minlength="6" autocomplete="new-password">
            </div>
            
            <button type="submit" class="btn btn-primary" style="width: 100%;">
                ğŸ” Change Password
            </button>
        </form>
        
        <div style="margin-top: 1.5rem; padding: 1rem; background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%); border-radius: 12px; border-left: 4px solid var(--info);">
            <strong style="color: var(--info);">ğŸ’¡ Password Tips:</strong>
            <ul style="margin: 0.5rem 0 0 1.5rem; font-size: 0.875rem; color: #6b7280; line-height: 1.6;">
                <li>Use at least 6 characters</li>
                <li>Mix uppercase and lowercase letters</li>
                <li>Include numbers and special characters</li>
                <li>Avoid common words or patterns</li>
            </ul>
        </div>
    </div>
</div>

<div class="card" style="background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);">
    <h2 class="card-title" style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
        â„¹ï¸ Account Permissions
    </h2>
    
    {% if user.role == 'admin' %}
    <div style="padding: 1rem; background: rgba(255, 255, 255, 0.7); border-radius: 8px;">
        <p style="font-weight: 600; margin-bottom: 0.5rem;">As an Administrator, you can:</p>
        <ul style="margin-left: 1.5rem; line-height: 1.8;">
            <li>âœ… View and manage all dashboard data</li>
            <li>âœ… Add, remove, and manage Telegram users</li>
            <li>âœ… Start, stop, and restart the bot</li>
            <li>âœ… Edit bot configuration</li>
            <li>âœ… View all command logs</li>
            <li>âœ… Manage portal users (add/remove/edit)</li>
        </ul>
    </div>
    {% else %}
    <div style="padding: 1rem; background: rgba(255, 255, 255, 0.7); border-radius: 8px;">
        <p style="font-weight: 600; margin-bottom: 0.5rem;">As a Viewer, you can:</p>
        <ul style="margin-left: 1.5rem; line-height: 1.8;">
            <li>âœ… View dashboard statistics</li>
            <li>âœ… View Telegram users</li>
            <li>âœ… View command logs</li>
            <li>âŒ Cannot modify bot settings</li>
            <li>âŒ Cannot start/stop the bot</li>
            <li>âŒ Cannot add/remove users</li>
        </ul>
        <p style="margin-top: 1rem; font-style: italic; color: #6b7280;">
            Contact an administrator to upgrade your permissions.
        </p>
    </div>
    {% endif %}
</div>

<div style="text-align: center; margin-top: 2rem;">
    <a href="{{ url_for('index') }}" class="btn" style="background: #6b7280; color: white;">
        â† Back to Dashboard
    </a>
</div>
{% endblock %}
